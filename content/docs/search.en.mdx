---
title: Advanced Search
description: Powerful search system in Swell with Algolia and Laravel Scout - instant search, advanced filters and smart suggestions.
---

## Search system with Algolia

**Swell** integrates an advanced search system based on **Algolia** and **Laravel Scout** to provide an instant and relevant search experience.

<Callout type="info">
  The search uses Algolia's real-time indexing for ultra-fast results with typo-tolerance and suggestions.
</Callout>

## Laravel Scout configuration

### Indexed models

Product models are automatically synchronized with Algolia:

```php title="app/Models/Product.php"
use Laravel\Scout\Searchable;

class Product extends Model
{
    use Searchable;

    public function shouldBeSearchable(): bool
    {
        return $this->status === true;
    }
}
```

### Algolia configuration

```bash title=".env"
SCOUT_QUEUE=
ALGOLIA_APP_ID=
ALGOLIA_SECRET=
```

## Search controller

```php title="app/Http/Controllers/ProductController.php"
public function index(Request $request)
{
    // ...

    $search = $request->input('search');

    if ($search) {
        $products = Product::search($search)
            ->query(function ($query) use ($in, $out, $sort) {
                $query->where('status', true)
                    ->with('featuredImage', 'brand');

                $this->applyStockFilter($query, $in, $out);
                $this->applySort($query, $sort);
            })->paginate(16)->withQueryString();
    }

    // ...

    return Inertia::render('products/index', [
        'search' => fn () => $search,
        'data' => fn () => ProductResource::collection($products),
    ]);
}
```

## React user interface

### Search components

**SearchInput** - Main search bar

```tsx title="resources/js/components/swell/header.tsx"
const [search, setSearch] = useState<string>(() => new URLSearchParams(window.location.search).get('search') || '');

const debouncedSearch = useMemo(() =>
    debounce((value) => {
        router.get(
            route('product.index'),
            { search: value },
            {
                preserveState: true,
                replace: true,
            },
        );
    }, 300),
[]);

const handleChange = (e: { target: { value: SetStateAction<string> } }) => {
    setSearch(e.target.value);
    debouncedSearch(e.target.value);
};

return (
    // ...

    <form className="relative w-full" onSubmit={(e) => e.preventDefault()}>
        <Input
            className="peer sm:min-w-60 ps-9 sm:pe-9"
            placeholder="Search for a product..."
            value={search}
            onChange={handleChange}
        />
        <div className="pointer-events-none absolute inset-y-0 start-0 flex 
            items-center justify-center ps-3 text-muted-foreground/80 peer-disabled:opacity-50">
            <SearchIcon size={16} />
        </div>
    </form>

    // ...
)
```

## Performance optimizations

### Server-side

- Asynchronous indexing with queues
- Incremental index updates
- Frequent query caching
- Optimized pagination

### Client-side

- Search query debouncing

## Artisan commands

```bash
# Index all products
php artisan scout:import "App\Models\Product"

# Clear index
php artisan scout:flush "App\Models\Product"

# Complete reindexing
php artisan scout:flush "App\Models\Product"
php artisan scout:import "App\Models\Product"
```

<Callout>
    More information in the [Laravel](https://laravel.com/docs/12.x/scout#main-content) documentation
</Callout>

## API routes

```php title="routes/web.php"
Route::get('/products', [ProductController::class, 'index'])->name('product.index');
```

The search system provides a modern user experience with instant and relevant results, 
optimizing product discovery.